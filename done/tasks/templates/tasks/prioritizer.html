{% extends 'base.html' %}
{% load static %}
{% block data-wf %}data-wf-page="653fc2444491a35371971509" data-wf-site="652482ea837db348b1939c93"{% endblock data-wf %}
{% block title %}Priorizer{% endblock title %}
{% load widget_tweaks %}
{% block content %}

  <div class="main-section">
    <div class="form-block-header w-form">
      <form id="wf-form-selector" name="wf-form-selector" data-name="selector" method="post" class="form-2" data-wf-page-id="653fc2444491a35371971509" data-wf-element-id="89f1164f-914e-c1bf-ad36-09a1e20dd3f5">
        <div class="nto-header-div medium">
          <div class="nto-hrd-div centered">
            <div class="nto-hdr">
              <div class="done-logo-small">DONE</div>
              <div class="hdr-2">Priorizer</div>
            </div>
          </div>
          <div class="nto-inpt-slct-div horizontal single-line">
            <label data-w-id="89f1164f-914e-c1bf-ad36-09a1e20dd40a" class="project-radio radio-btn-field w-radio">
              <input type="radio" id="project-radio" name="input-type" value="project" data-name="input type" class="w-form-formradioinput radio-btn w-radio-input">
              <span class="menu-txt w-form-label" for="project-2">Projects</span>
            </label>
            <label data-w-id="89f1164f-914e-c1bf-ad36-09a1e20dd40e" class="task-radio radio-btn-field w-radio">
              <input type="radio" id="task-radio" name="input-type" value="not actionable" data-name="input type" class="w-form-formradioinput radio-btn w-radio-input">
              <span class="radio-button-label w-form-label" for="not-actionable">Tasks</span>
            </label>
          </div>
        </div>
      </form>
      <div class="w-form-done">
        <div>Thank you! Your submission has been received!</div>
      </div>
      <div class="w-form-fail">
        <div>Oops! Something went wrong while submitting the form.</div>
      </div>
    </div>
    <div data-w-id="0ad156d8-e1d7-1bb0-dce7-4d0941c0a634" class="hint-block">
      <div class="project-name">choose Projects of Task table</div>
    </div>
    <div data-w-id="e5de06c0-062f-37c2-782f-937d60c8eb3a" class="tbl-frame">
      <table class="task-table_component">
        <thead class="task-table_head">
          <tr class="task-table_row">
            <th class="tbl-hdr" data-sort="completion">
              <div class="filter-dropdown">
                <select class="filter-select" id="task-completion-filter">
                    <option value="">All</option>
                    <option value='false'>Completed</option>
                    <option value='true'>Active</option>
                </select>
              </div>
            </th>
            <th class="tbl-hdr" data-sort="compound">Compound <br>Priority</th>
            <th class="tbl-hdr" data-sort="priority">Priority</th>
            <th class="tbl-hdr" data-sort="name">Name</th>
            <th class="tbl-hdr" data-sort="effort">Effort</th>
            <th class="tbl-hdr" data-sort="context">Context</th>
            <th class="tbl-hdr" data-sort="deadline">Deadline</th>
            <th class="tbl-hdr" data-sort="assignee">Assignee</th>
          </tr>
        </thead>

          {% for task in tasks %}
          <tr class="rendered-row">
              <td class="tbl-cell centered" data-id="{{ task.id }}" data-type="complete">
                {% if task.complete %}
                  <input type="checkbox" class="input-data form-control completion-checkbox" checked>
                {% else %}
                  <input type="checkbox" class="input-data form-control completion-checkbox">
                {% endif %}
              </td>
              <td class="editable tbl-cell centered" data-id="{{ task.id }}" data-type="compound">compnd</td>
              <td class="priority tbl-cell centered" data-id="{{ task.id }}" data-type="priority">{{ task.priority }}</td>
              <td class="editable tbl-cell" data-id="{{ task.id }}" data-type="name">{{ task.name }}</td>
              <td class="editable tbl-cell centered" data-id="{{ task.id }}" data-type="effort">{{ task.effort }}</td>
              <td class="context tbl-cell centered" data-id="{{ task.id }}" data-type="context">{{ task.context.name }}</td>
              <td class="editable tbl-cell centered" data-id="{{ task.id }}" data-type="deadline">{{ task.deadline|date:"j M" }}</td>
              <td class="assignee tbl-cell centered" data-id="{{ task.id }}" data-type="assignee">{{ task.assignee.name }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div data-w-id="702bb6ac-73de-582a-b6b8-eae4ff24e7c1" class="tbl-frame">
      <table class="task-table_component">
        <thead class="task-table_head">
          <tr class="task-table_row">
            <th class="tbl-hdr" data-sort="completion">
              <div class="filter-dropdown">
                <select class="filter-select" id="project-completion-filter">
                  <option value="">All</option>
                  <option value='false'>Completed</option>
                  <option value='true'>Active</option>
                </select>
              </div>
            </th>
            <th class="tbl-hdr" data-sort="priority">Priority</th>
            <th class="tbl-hdr" data-sort="name">Name</th>
            <th class="tbl-hdr" data-sort="deadline">Deadline</th>
          </tr>
        </thead>
        <tbody class="task-table_body">

          {% for project in projects %}
          <tr class="rendered-row">
              <td class="tbl-cell centered" data-id="{{ project.id }}" data-type="complete">
                {% if project.project_complete %}
                  <input type="checkbox" class="input-data form-control completion-checkbox" checked>
                {% else %}
                  <input type="checkbox" class="input-data form-control completion-checkbox">
                {% endif %}
              </td>
              <td class="priority tbl-cell centered" data-id="{{ project.id }}" data-type="priority">{{ project.project_priority }}</td>
              <td class="editable tbl-cell" data-id="{{ project.id }}" data-type="name">{{ project.project_name }}</td>
              <td class="editable tbl-cell centered" data-id="{{ project.id }}" data-type="deadline">{{ project.project_deadline|date:"j M" }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="frame-427318914">
      <div class="frame-427318912">
        <div class="text-7">Close</div>
      </div>
    </div>
  </div>
  {% endblock content %}

  {% block custom_js %}
  {% comment %} control table behaviour {% endcomment %}
  <script> 
    var taskServerUrl = "{% url 'save_tasks' %}";
    var projectServerUrl = "{% url 'save_projects' %}";
    var contextUrl = "{% url 'prioritizer' %}";
    var contextOptions = {{ context_options_list|safe }};
    var assigneeOptions = {{ assignee_options_list|safe}}
  </script>
  <script src="{% static 'tasks/table.js' %}" id="url"></script>
  {% endblock custom_js %}

  
  {% comment %} required to send to server {% endcomment %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>




